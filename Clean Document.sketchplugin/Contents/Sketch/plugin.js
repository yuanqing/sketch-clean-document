!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";var s={};n.r(s),n.d(s,"CHECK_BOX",function(){return a}),n.d(s,"DROP_DOWN",function(){return c}),n.d(s,"RADIO_BUTTONS",function(){return l}),n.d(s,"NUMERIC_TEXT_BOX",function(){return d.a}),n.d(s,"STRING_TEXT_BOX",function(){return y}),n.d(s,"TEXT_BOX",function(){});const r="sketch-plugin-helper";function i(){return JSON.parse('{"private": true,"version": "0.0.0","devDependencies": {"sketch-plugin-helper": "*"},"scripts": {"build": "sph build","fix": "sph lint --fix","lint": "sph lint","symlink": "sph symlink","unlink": "sph symlink --delete","version": "sph version","watch": "sph build --watch"},"sketch-plugin-helper": {"pluginName": "Clean Document","pluginDescription": "A Sketch plugin to automagically organise and clean up your Sketch document","authorName": "Lim Yuan Qing","githubUserName": "yuanqing","githubRepositoryName": "sketch-clean-document","menu": [{"handler": "clean-document","label": "Clean Document"},"-",{"handler": "clean-layers/clean-layers","label": "Clean Layers"},{"handler": "delete-unused-styles-and-symbols/delete-unused-styles-and-symbols","label": "Delete Unused Styles and Symbols"},"-",{"Settings": [{"handler": "clean-layers/settings","label": "Settings for Clean Layers"},{"handler": "delete-unused-styles-and-symbols/settings","label": "Settings for Delete Unused Styles and Symbols"},"-",{"handler": "reset-settings","label": "Reset Settings"}]}],"defaultSettings": {"deleteHiddenLayers": true,"deleteUnusedLayerStyles": true,"deleteUnusedSymbols": true,"deleteUnusedTextStyles": true,"flattenNestedGroups": true,"smartRenameLayers": true}}\n}\n')}var o=n(1);function u(){const{defaultSettings:e}=i()[r];return void 0===e?{}:Object.keys(e).reduce(function(t,n){const s=Object(o.sessionVariable)(n),r=Object(o.settingForKey)(n),i=void 0!==s?s:r,u=e[n];return t[n]=void 0!==i?i:u,t},{})}function a({width:e,height:t,label:n,value:s}){const r=NSButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));return r.setButtonType(NSSwitchButton),r.setBezelStyle(0),r.setState(s?NSOnState:NSOffState),r.setTitle(n),{view:r,retrieveValue:function(){return"1"==r.stringValue()}}}function c({width:e,height:t,value:n,possibleValues:s}){const r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));s.forEach(function(e){r.addItemWithTitle(e)});const i=void 0!==n?s.indexOf(n):0;return r.selectItemAtIndex(i),{view:r,retrieveValue:function(){const e=r.indexOfSelectedItem();return s[e]}}}function l({width:e,height:t,value:n,possibleValues:s}){const r=NSButtonCell.alloc().init();r.setButtonType(NSRadioButton);const i=s.length,o=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,0,e,t),NSRadioModeMatrix,r,1,i);o.setCellSize(CGSizeMake(Math.floor(e/i),t)),o.cells().forEach(function(e,t){e.setTitle(s[t])});const u=void 0!==n?s.indexOf(n):0;return o.selectCellAtRow_column(0,u),{view:o,retrieveValue:function(){const e=o.cells().indexOfObject(o.selectedCell());return s[e]}}}var d=n(5),f=n(2);const y=Object(f.a)(),p=20,h=12,b=20,m=6,S=300;function g({title:e,inputs:t}){const n=u(),{inputs:r,views:i,stackViewHeight:o}=function({inputsConfig:e,settings:t}){const n={},r=[];let i=0;return e.forEach(function({type:e,key:o,label:u,value:a,...c}){if(u&&"CHECK_BOX"!==e){const e=function({label:e,width:t,height:n}){const s=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n));return s.setBezeled(!1),s.setDrawsBackground(!1),s.setEditable(!1),s.setLineBreakMode(NSLineBreakByTruncatingTail),s.setSelectable(!1),s.setStringValue(e),s}({label:u,width:S,height:b});r.push({view:e,paddingBottom:m}),i+=b+m}const l=t[o],d=null!=a?a:l,{view:f,retrieveValue:y}=s[e]({label:u,value:d,width:S,height:p,...c});r.push({view:f,paddingBottom:h}),i+=p+h,n[o]=y}),{inputs:n,views:r,stackViewHeight:i-=h}}({inputsConfig:t,settings:n}),a=function({width:e,height:t,views:n}){const s=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,e,t));return s.setAlignment(NSLayoutAttributeLeft),s.setOrientation(NSUserInterfaceLayoutOrientationVertical),s.setSpacing(0),s.setTranslatesAutoresizingMaskIntoConstraints(!0),s.updateConstraintsForSubtreeIfNeeded(),n.forEach(function({view:e,paddingBottom:t}){s.addView_inGravity_(e,NSStackViewGravityTop),s.setCustomSpacing_afterView_(t,e)}),s}({width:S,height:o,views:i}),c=function(e){const t=NSAlert.alloc().init();return t.window().setAutorecalculatesKeyViewLoop(!0),t.setMessageText(e),t.addButtonWithTitle("OK"),t.addButtonWithTitle("Cancel"),t}(e);return c.setAccessoryView(a),"1000"==c.runModal()?Object.keys(r).reduce(function(e,t){const n=r[t];return e[t]=n(),e},{}):null}var v=n(6),O=n.n(v);function _(e,t){O.a.message(t&&t.symbol?`${t.symbol} ${e}`:e)}function k(e){_(e,{symbol:"âœ”"})}function j(){const{defaultSettings:e}=i()[r];void 0!==e&&(Object.keys(e).forEach(function(e){Object(o.setSettingForKey)(e,void 0),Object(o.setSessionVariable)(e,void 0)}),_("Reset settings"))}w(o.setSettingForKey),w(o.setSessionVariable);function w(e){return function(t,n){if(void 0===t)return;Object.keys(t).forEach(function(n){const s=t[n];void 0!==s&&e(n,s)});const s=void 0!==n&&n.successMessage;s&&_(s)}}n(7),n(8);n(9);var x=n(10);function N(){const e=NSApplication.sharedApplication().orderedDocuments();return Object(x.fromNative)(e[0])}function T(e){!function e(t,n){const s=t.parent;s&&"Group"===s.type&&!n[s.id]&&(s.adjustToFit(),n[s.id]=!0,e(s,n))}(e,{})}function M(){return N().selectedPage.layers}function B(){const e=[];return N().pages.forEach(function({layers:t}){t.forEach(function(t){e.push(t)})}),e}function D(){const e=N().selectedLayers.layers.reverse();return 0!==e.length?e:M()}function C(e,t){e.forEach(function(e){t(e);const n=e.type;"Artboard"!==n&&"Group"!==n||C(e.layers,t)})}n.d(t,"f",function(){return u}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return j}),n.d(t,"a",function(){return"CHECK_BOX"}),n.d(t,"b",function(){return T}),n.d(t,"c",function(){return N}),n.d(t,"d",function(){return B}),n.d(t,"e",function(){return D}),n.d(t,"g",function(){return C}),n.d(t,"j",function(){return _}),n.d(t,"k",function(){return k})},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";function s(e){return function({width:t,height:n,value:s,placeholder:r}){const i=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n)),o=null==s?"":`${s}`;return i.setStringValue(o),r&&i.setPlaceholderString(r),{view:i,retrieveValue:function(){const t=`${i.stringValue()}`;return e?e(t):t}}}}n.d(t,"a",function(){return s})},function(e,t,n){"use strict";n.r(t);var s=n(0);const r={Group:function(e){e.name="Group"},HotSpot:function(e){e.name="Hotspot"},Image:function(e){e.name="Bitmap"},Shape:function(e){e.name="Combined Shape",e.layers.forEach(function(e){i(e)})},ShapePath:function(e){"Rectangle"!==e.shapeType?"Oval"!==e.shapeType?e.name="Path":e.name="Oval":e.name="Rectangle"},SymbolInstance:function(e){const t=Object(s.c)().getSymbolMasterWithID(e.symbolId);e.name=t.name},Text:function(e){const t=e.sketchObject;t.setName(t.stringValue().substring(0,20)),t.setNameIsFixed(!1)}};function i(e){if(0!==e.exportFormats.length)return;if(1===e.sketchObject.hasClippingMask())return void(e.name="Mask");const t=r[e.type];t&&t(e)}function o({cleanDocument:e}){const t=Object(s.f)(),n=e?Object(s.d)():Object(s.e)();Object(s.g)(n,function(e){t.deleteHiddenLayers&&function(e){return!!e.hidden&&(e.remove(),!0)}(e)||(t.smartRenameLayers&&i(e),t.flattenNestedGroups&&function e(t){if("Group"!==t.type)return;const n=t.layers,r=n.length;return 0===r?(t.remove(),void Object(s.b)(t)):1===r?(n[0].sketchObject.moveToLayer_beforeLayer(t.parent.sketchObject,t.sketchObject),n[0].selected=!1,t.remove(),Object(s.b)(t),void e(n[0])):void n.forEach(function(t){e(t)})}(e))}),Object(s.k)("Layers cleaned")}n.d(t,"default",function(){return o})},function(e,t,n){"use strict";n.r(t);var s=n(0);const r=o("layerStyles","sharedLayerStyles"),i=o("layerTextStyles","sharedTextStyles");function o(e,t){return function(){const n=Object(s.c)(),r=n.sketchObject.documentData()[e]();let i=0;return n[t].forEach(function(e){0===e.getAllInstancesLayers().length&&(r.removeSharedStyle(r.sharedStyleWithID(e.id)),i++)}),i}}function u(){const e=Object(s.f)();let t=0;e.deleteUnusedLayerStyles&&(t+=r()),e.deleteUnusedTextStyles&&(t+=i());let n=0;if(e.deleteUnusedSymbols&&(n+=function(){let e=0;return Object(s.g)(Object(s.d)(),function(t){"SymbolMaster"===t.type&&0===t.getAllInstances().length&&(t.remove(),e++)}),e}()),0===t&&0===n)return void Object(s.j)("No unused styles or symbols found");const o=a({type:"style",count:t}),u=a({type:"symbol",count:n});0===t||0===n?0===n?Object(s.k)(`Deleted ${o}`):Object(s.k)(`Deleted ${u}`):Object(s.k)(`Deleted ${o} and ${u}`)}function a({type:e,count:t}){return`${t} unused ${e}${1===t?"":"s"}`}n.d(t,"default",function(){return u})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return numericTextBox});var _text_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const numericTextBox=Object(_text_box__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const s=async(e,t)=>{let n=0;for(const s of e)await t(await s,n++);return e};e.exports=s,e.exports.default=s},function(e,t){e.exports=require("sketch/dom")},function(e,t){e.exports=require("sketch")},function(e,t,n){e.exports=n(12)},function(e,t,n){e.exports={"clean-document":n(13).default,"clean-layers/clean-layers":n(3).default,"delete-unused-styles-and-symbols/delete-unused-styles-and-symbols":n(4).default,"clean-layers/settings":n(14).default,"delete-unused-styles-and-symbols/settings":n(15).default,"reset-settings":n(16).default}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var s=n(0),r=n(3),i=n(4);function o(){Object(r.default)({cleanDocument:!0}),Object(i.default)(),Object(s.k)("Document cleaned")}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var s=n(0);const r={title:"Settings for Clean Layers",inputs:[{type:s.a,key:"smartRenameLayers",label:"Smart rename layers"},{type:s.a,key:"flattenNestedGroups",label:"Flatten nested groups"},{type:s.a,key:"deleteHiddenLayers",label:"Delete hidden layers"}]};function i(){const e=Object(s.h)(r);e&&saveSettings(e,{successMessage:"Settings saved"})}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var s=n(0);const r={title:"Settings for Delete Unused Styles and Symbols",inputs:[{type:s.a,key:"deleteUnusedTextStyles",label:"Delete unused text styles"},{type:s.a,key:"deleteUnusedLayerStyles",label:"Delete unused layer styles"},{type:s.a,key:"deleteUnusedSymbols",label:"Delete unused symbols"}]};function i(){const e=Object(s.h)(r);e&&saveSettings(e,{successMessage:"Settings saved"})}},function(e,t,n){"use strict";n.r(t);var s=n(0);t.default=s.i}]));