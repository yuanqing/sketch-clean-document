!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"CHECK_BOX",function(){return c}),n.d(r,"DROP_DOWN",function(){return a}),n.d(r,"RADIO_BUTTONS",function(){return s}),n.d(r,"NUMERIC_TEXT_BOX",function(){return l.a}),n.d(r,"STRING_TEXT_BOX",function(){return d}),n.d(r,"TEXT_BOX",function(){});const i="sketch-plugin-helper";function o(){return JSON.parse('{"private": true,"version": "0.0.0","devDependencies": {"sketch-plugin-helper": "*"},"scripts": {"build": "sph build","fix": "sph lint --fix","lint": "sph lint","symlink": "sph symlink","unlink": "sph symlink --delete","version": "sph version","watch": "sph build --watch"},"sketch-plugin-helper": {"pluginName": "Clean Document","pluginDescription": "A Sketch plugin to automagically organise and clean up your Sketch document","authorName": "Lim Yuan Qing","githubUserName": "yuanqing","githubRepositoryName": "sketch-clean-document","menu": [{"handler": "clean-layers/clean-layers","label": "Clean Layers"},"-",{"handler": "reset-settings","label": "Reset Settings"}],"defaultSettings": {"deleteHiddenLayers": true,"flattenNestedGroups": true,"scope": "Current page","smartRenameLayers": true}}\n}\n')}var u=n(1);function c({width:e,height:t,label:n,value:r}){const i=NSButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));return i.setButtonType(NSSwitchButton),i.setBezelStyle(0),i.setState(r?NSOnState:NSOffState),i.setTitle(n),{view:i,retrieveValue:function(){return"1"==i.stringValue()}}}function a({width:e,height:t,value:n,possibleValues:r}){const i=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,e,t));r.forEach(function(e){i.addItemWithTitle(e)});const o=void 0!==n?r.indexOf(n):0;return i.selectItemAtIndex(o),{view:i,retrieveValue:function(){const e=i.indexOfSelectedItem();return r[e]}}}function s({width:e,height:t,value:n,possibleValues:r}){const i=NSButtonCell.alloc().init();i.setButtonType(NSRadioButton);const o=r.length,u=NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(0,0,e,t),NSRadioModeMatrix,i,1,o);u.setCellSize(CGSizeMake(Math.floor(e/o),t)),u.cells().forEach(function(e,t){e.setTitle(r[t])});const c=void 0!==n?r.indexOf(n):0;return u.selectCellAtRow_column(0,c),{view:u,retrieveValue:function(){const e=u.cells().indexOfObject(u.selectedCell());return r[e]}}}var l=n(3),f=n(2);const d=Object(f.a)(),p=20,h=12,y=20,b=6,m=300;function g({title:e,inputs:t}){const n=function(){const{defaultSettings:e}=o()[i];return void 0===e?{}:Object.keys(e).reduce(function(t,n){const r=Object(u.sessionVariable)(n),i=Object(u.settingForKey)(n),o=void 0!==r?r:i,c=e[n];return t[n]=void 0!==o?o:c,t},{})}(),{inputs:c,views:a,stackViewHeight:s}=function({inputsConfig:e,settings:t}){const n={},i=[];let o=0;return e.forEach(function({type:e,key:u,label:c,value:a,...s}){if(c&&"CHECK_BOX"!==e){const e=function({label:e,width:t,height:n}){const r=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n));return r.setBezeled(!1),r.setDrawsBackground(!1),r.setEditable(!1),r.setLineBreakMode(NSLineBreakByTruncatingTail),r.setSelectable(!1),r.setStringValue(e),r}({label:c,width:m,height:y});i.push({view:e,paddingBottom:b}),o+=y+b}const l=t[u],f=null!=a?a:l,{view:d,retrieveValue:g}=r[e]({label:c,value:f,width:m,height:p,...s});i.push({view:d,paddingBottom:h}),o+=p+h,n[u]=g}),{inputs:n,views:i,stackViewHeight:o-=h}}({inputsConfig:t,settings:n}),l=function({width:e,height:t,views:n}){const r=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,e,t));return r.setAlignment(NSLayoutAttributeLeft),r.setOrientation(NSUserInterfaceLayoutOrientationVertical),r.setSpacing(0),r.setTranslatesAutoresizingMaskIntoConstraints(!0),r.updateConstraintsForSubtreeIfNeeded(),n.forEach(function({view:e,paddingBottom:t}){r.addView_inGravity_(e,NSStackViewGravityTop),r.setCustomSpacing_afterView_(t,e)}),r}({width:m,height:s,views:a}),f=function(e){const t=NSAlert.alloc().init();return t.window().setAutorecalculatesKeyViewLoop(!0),t.setMessageText(e),t.addButtonWithTitle("OK"),t.addButtonWithTitle("Cancel"),t}(e);return f.setAccessoryView(l),"1000"==f.runModal()?Object.keys(c).reduce(function(e,t){const n=c[t];return e[t]=n(),e},{}):null}var v=n(4),S=n.n(v);function _(e,t){S.a.message(t&&t.symbol?`${t.symbol} ${e}`:e)}function O(e){_(e,{symbol:"✔"})}function k(e){_(e,{symbol:"✘"})}function w(){const{defaultSettings:e}=o()[i];void 0!==e&&(Object.keys(e).forEach(function(e){Object(u.setSettingForKey)(e,void 0),Object(u.setSessionVariable)(e,void 0)}),_("Reset settings"))}j(u.setSettingForKey);const N=j(u.setSessionVariable);function j(e){return function(t,n){if(void 0===t)return;Object.keys(t).forEach(function(n){const r=t[n];void 0!==r&&e(n,r)});const r=void 0!==n&&n.successMessage;r&&_(r)}}n(5),n(6);n(7);var x=n(8);function T(){const e=NSApplication.sharedApplication().orderedDocuments();return Object(x.fromNative)(e[0])}function B(e){!function e(t,n){const r=t.parent;r&&"Group"===r.type&&!n[r.id]&&(r.adjustToFit(),n[r.id]=!0,e(r,n))}(e,{})}function C(){return T().selectedPage.layers}function M(){const e=[];return T().pages.forEach(function({layers:t}){t.forEach(function(t){e.push(t)})}),e}function E(){return T().selectedLayers.layers.reverse()}function R(e,t){e.forEach(function(e){t(e);const n=e.type;"Artboard"!==n&&"Group"!==n||R(e.layers,t)})}n.d(t,"i",function(){return g}),n.d(t,"j",function(){return w}),n.d(t,"k",function(){return N}),n.d(t,"a",function(){return"CHECK_BOX"}),n.d(t,"b",function(){return"DROP_DOWN"}),n.d(t,"c",function(){return B}),n.d(t,"d",function(){return T}),n.d(t,"f",function(){return C}),n.d(t,"e",function(){return M}),n.d(t,"g",function(){return E}),n.d(t,"h",function(){return R}),n.d(t,"m",function(){return O}),n.d(t,"l",function(){return k})},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";function r(e){return function({width:t,height:n,value:r,placeholder:i}){const o=NSTextField.alloc().initWithFrame(NSMakeRect(0,0,t,n)),u=null==r?"":`${r}`;return o.setStringValue(u),i&&o.setPlaceholderString(i),{view:o,retrieveValue:function(){const t=`${o.stringValue()}`;return e?e(t):t}}}}n.d(t,"a",function(){return r})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return numericTextBox});var _text_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const numericTextBox=Object(_text_box__WEBPACK_IMPORTED_MODULE_0__.a)(function(value){return parseFloat(eval(value))})},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const r=async(e,t)=>{let n=0;for(const r of e)await t(await r,n++);return e};e.exports=r,e.exports.default=r},function(e,t){e.exports=require("sketch/dom")},function(e,t){e.exports=require("sketch")},function(e,t,n){e.exports=n(10)},function(e,t,n){e.exports={"clean-layers/clean-layers":n(12).default,"reset-settings":n(11).default}},function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=r.j},function(e,t,n){"use strict";n.r(t);var r=n(0);const i={Group:function(e){e.name="Group"},HotSpot:function(e){e.name="Hotspot"},Image:function(e){e.name="Bitmap"},Shape:function(e){e.name="Combined Shape",e.layers.forEach(function(e){o(e)})},ShapePath:function(e){"Rectangle"!==e.shapeType?"Oval"!==e.shapeType?e.name="Path":e.name="Oval":e.name="Rectangle"},SymbolInstance:function(e){const t=Object(r.d)().getSymbolMasterWithID(e.symbolId);e.name=t.name},Text:function(e){const t=e.sketchObject;t.setName(t.stringValue().substring(0,20)),t.setNameIsFixed(!1)}};function o(e){if(0!==e.exportFormats.length)return;if(1===e.sketchObject.hasClippingMask())return void(e.name="Mask");const t=i[e.type];t&&t(e)}function u(){const e=Object(r.g)(),t=0!==e.length,n=Object(r.i)({title:"Clean Layers",inputs:[{type:r.a,key:"deleteHiddenLayers",label:"Delete hidden layers"},{type:r.a,key:"flattenNestedGroups",label:"Flatten nested groups"},{type:r.a,key:"smartRenameLayers",label:"Smart rename layers"},{type:r.b,key:"scope",label:"Scope",possibleValues:[t&&"Selected layers","Current page","Entire document"].filter(Boolean),value:t?"Selected layers":null}]});if(!n)return;const{scope:i,...u}=n;let c=[];if("Selected layers"===i){if(Object(r.k)(u),0===(c=e).length)return void Object(r.l)("No layers in selection")}else if(Object(r.k)(n),0===(c="Current page"===i?Object(r.f)():Object(r.e)()).length)return void Object(r.l)("No layers found");Object(r.h)(c,function(e){n.deleteHiddenLayers&&function(e){return!!e.hidden&&(e.remove(),!0)}(e)||(n.smartRenameLayers&&o(e),n.flattenNestedGroups&&function e(t){if("Group"!==t.type)return;const n=t.layers,i=n.length;return 0===i?(t.remove(),void Object(r.c)(t)):1===i?(n[0].sketchObject.moveToLayer_beforeLayer(t.parent.sketchObject,t.sketchObject),n[0].selected=!1,t.remove(),Object(r.c)(t),void e(n[0])):void n.forEach(function(t){e(t)})}(e))}),Object(r.m)("Cleaned layers")}n.d(t,"default",function(){return u})}]));